(function() {
  var app;

  app = function() {
    var getPosition, initLink, initMap, initMenu, initScroll, menuOpen;
    menuOpen = false;
    initMap = function() {
      var script;
      script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp' + '&signed_in=true&callback=callbackMap';
      return document.body.appendChild(script);
    };
    initMenu = function() {
      return document.querySelector('#nav').addEventListener("click", function() {
        var d;
        d = document.querySelector("#navContainer");
        console.log(d.className, menuOpen);
        if (menuOpen) {
          d.className = d.className + " hidden";
        } else {
          d.className = d.className.replace(/hidden/, "");
        }
        return menuOpen = !menuOpen;
      });
    };
    initScroll = function() {
      return document.addEventListener("scroll", function(e) {
        return console.log(document.documentElement.scrollTop);
      });
    };
    initLink = function() {
      var addClickEventOnButtons, addClickEventOnLinks, buttons, element, i, index, j, len, len1, links, scrollTo;
      buttons = document.querySelectorAll('button[data-href]');
      links = document.querySelectorAll('a[href]');
      addClickEventOnButtons = function(element) {
        return element.addEventListener("click", function(e) {
          var url;
          url = this.getAttribute('data-href');
          if (url.indexOf("#") > -1) {
            e.preventDefault();
            return scrollTo(url);
          }
        });
      };
      addClickEventOnLinks = function(element) {
        return element.addEventListener("click", function(e) {
          var url;
          url = this.getAttribute('href');
          console.log(url);
          if (url.indexOf("#") > -1) {
            e.preventDefault();
            return scrollTo(url);
          }
        });
      };
      if (buttons) {
        for (index = i = 0, len = buttons.length; i < len; index = ++i) {
          element = buttons[index];
          addClickEventOnButtons(element);
        }
      }
      if (links) {
        for (index = j = 0, len1 = links.length; j < len1; index = ++j) {
          element = links[index];
          addClickEventOnLinks(element);
        }
      }
      return scrollTo = function(el) {
        console.log(getPosition(document.querySelector(el)).y - 50);
        return window.scroll(0, getPosition(document.querySelector(el)).y - 50);
      };
    };
    getPosition = function(obj) {
      var curleft, curtop;
      curleft = curtop = 0;
      while (obj) {
        curleft += obj.offsetLeft;
        curtop += obj.offsetTop;
        obj = obj.offsetParent;
      }
      return {
        x: curleft,
        y: curtop
      };
    };
    initLink();
    initScroll();
    initMenu();
    return initMap();
  };

  window.callbackMap = function() {
    var map, mapOptions;
    mapOptions = {
      zoom: 8,
      center: new google.maps.LatLng('-34.397', '150.644'),
      disableDefaultUI: true
    };
    map = new google.maps.Map(document.getElementById('map-canvas', mapOptions));
    return map.setOptions({
      draggable: true,
      zoomControl: false,
      scrollwheel: false,
      disableDoubleClickZoom: true
    });
  };

  window.addEventListener("load", function() {
    return app();
  });

}).call(this);
